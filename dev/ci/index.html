<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Automatic Testing · QuantumElectrodynamics.jl</title><meta name="title" content="Automatic Testing · QuantumElectrodynamics.jl"/><meta property="og:title" content="Automatic Testing · QuantumElectrodynamics.jl"/><meta property="twitter:title" content="Automatic Testing · QuantumElectrodynamics.jl"/><meta name="description" content="Documentation for QuantumElectrodynamics.jl."/><meta property="og:description" content="Documentation for QuantumElectrodynamics.jl."/><meta property="twitter:description" content="Documentation for QuantumElectrodynamics.jl."/><meta property="og:url" content="https://qedjl-project.github.io/QuantumElectrodynamics.jl/ci/"/><meta property="twitter:url" content="https://qedjl-project.github.io/QuantumElectrodynamics.jl/ci/"/><link rel="canonical" href="https://qedjl-project.github.io/QuantumElectrodynamics.jl/ci/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QuantumElectrodynamics.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Automatic Testing</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Unit-Tests-for-CI-Users"><span>Unit Tests for CI Users</span></a></li><li class="toplevel"><a class="tocitem" href="#Integration-Tests-for-CI-Users"><span>Integration Tests for CI Users</span></a></li><li class="toplevel"><a class="tocitem" href="#Environment-Variables"><span>Environment Variables</span></a></li><li class="toplevel"><a class="tocitem" href="#Unit-Tests-for-CI-Develops"><span>Unit Tests for CI Develops</span></a></li><li><a class="tocitem" href="#Running-Locally"><span>Running Locally</span></a></li><li class="toplevel"><a class="tocitem" href="#Integration-Tests-for-CI-Develops"><span>Integration Tests for CI Develops</span></a></li><li><a class="tocitem" href="#Stage:-Unit-Tests"><span>Stage: Unit Tests</span></a></li><li><a class="tocitem" href="#Stage:-Generate-integration-Tests"><span>Stage: Generate integration Tests</span></a></li><li><a class="tocitem" href="#Stage:-Run-Integration-Tests"><span>Stage: Run Integration Tests</span></a></li><li><a class="tocitem" href="#Stage:-Integration-Tests-of-Sub-Packages-N"><span>Stage: Integration Tests of Sub-Packages N</span></a></li><li><a class="tocitem" href="#Running-Locally-2"><span>Running Locally</span></a></li></ul></li><li><a class="tocitem" href="../dev_guide/">Development Guide</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Automatic Testing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Automatic Testing</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/QEDjl-project/QuantumElectrodynamics.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/QEDjl-project/QuantumElectrodynamics.jl/blob/dev/docs/src/ci.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Automatic-Testing"><a class="docs-heading-anchor" href="#Automatic-Testing">Automatic Testing</a><a id="Automatic-Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Automatic-Testing" title="Permalink"></a></h1><p>In the <code>QuantumElectrodynamics.jl</code> eco-system, we use <a href="https://en.wikipedia.org/wiki/Continuous_integration">Continuous integration</a> (CIs) for running automatic tests. Each time, when a pull request is opened on GitHub.com or changes are committed to an existing pull request, the CI pipeline is triggered and starts a test script. The result of the tests will be reported in the pull request. In <code>QuantumElectrodynamics.jl</code>, we distinguish between two kinds of tests</p><ul><li><strong>Unit tests</strong>: tests which check the functionality of the modified (sub-) package. Those tests can either run standalone or use the functionality of other (third-party) packages.</li><li><strong>Integration tests</strong>: tests which check the interoperatebility of the modified package with all sub-packages. For example, if package <code>A</code> depends on package <code>B</code> and you change package <code>B</code>, the integration test will check, if package <code>A</code> still works with the new version of package <code>B</code>.</li></ul><p>The CI will first execute the unit tests. Then, if all unit tests are passed, the integration tests will be started.</p><p>Our CI uses the <a href="https://docs.gitlab.com/ee/ci/">GitLab CI</a> because it allows us to use CI resources provided by <a href="https://www.hifis.net/">HIFIS</a>. There, we can use strong CPU runners and special runners for testing on Nvidia and AMD GPUs.</p><h1 id="Unit-Tests-for-CI-Users"><a class="docs-heading-anchor" href="#Unit-Tests-for-CI-Users">Unit Tests for CI Users</a><a id="Unit-Tests-for-CI-Users-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Tests-for-CI-Users" title="Permalink"></a></h1><p>The unit tests are automatically triggered, if you open a pull request, which target the <code>main</code> or <code>dev</code> branch. Before the tests start, the CI sets up the test environment.  Thus, the <code>Project.toml</code> of the project is taken and the latest development version of each QuantumElectrodynamics.jl dependency is added. Other dependencies will regularly be resolved by the Julia Package manager. Afterwards the unit tests will be executed.</p><p>You can also modify which version of a <code>QuantumElectrodynamics.jl</code> dependency should be used. For example if you need to test your code with a function, which is not merged in the development branch yet. Thus, you need to add a specific line to your commit message with the following format:</p><pre><code class="nohighlight hljs">CI_UNIT_PKG_URL_&lt;dep_name&gt;: https://github.com/&lt;user&gt;/&lt;dep_name&gt;#&lt;commit_hash&gt;</code></pre><p>You can find the <code>&lt;dep_name&gt;</code> name in the <code>Project.toml</code> of the dependent project. For example, let&#39;s assume the name of the dependent package is <code>depLibrary</code>. The url of the fork is https://github.com/user/depLibrary.jl and the required feature has the commit sha <code>45a753b</code>.</p><pre><code class="nohighlight hljs">This commit extends function foo with a new
function argument.

The function argument is required to control
the new functionality.

If you pass a 0, it has a special meaning.

CI_UNIT_PKG_URL_depLibrary: https://github.com/user/depLibrary.jl#45a753b</code></pre><p>It is also possible to set a custom URL for more than one package. Simply add an additional line with the format <code>CI_UNIT_PKG_URL_&lt;dep_name&gt;: https://github.com/&lt;user&gt;/&lt;dep_name&gt;#&lt;commit_hash&gt;</code> to the commit message.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You don&#39;t need to add a new commit to set custom URLs. You can modify the commit message with <code>git commit --amend</code> and force push to the branch. This also starts the CI pipeline again.</p></div></div><p>There is a last job, which checks if lines starting with <code>CI_UNIT_PKG_URL_</code> exist in the commit message of the latest commit. If so, the unit test will fail. This is required, because otherwise the merged code would depend on non merged changes in sub-packages and would be non-compatible.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If you use <code>CI_UNIT_PKG_URL_</code>, the CI pipeline will fail which does not mean that the actual tests are failing.</p></div></div><h1 id="Integration-Tests-for-CI-Users"><a class="docs-heading-anchor" href="#Integration-Tests-for-CI-Users">Integration Tests for CI Users</a><a id="Integration-Tests-for-CI-Users-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-Tests-for-CI-Users" title="Permalink"></a></h1><p>The integration tests are automatically triggered if you open a pull request that targets the <code>main</code> or <code>dev</code> branch, and the unit tests have passed. The integration tests itself are in an extra stage of the CI.</p><p><img src="../CI_pipeline.png" alt="CI pipeline with unit and integration tests"/></p><p>If the tests pass successfully, you don&#39;t need to do anything. If they fail, i.e. the change breaks the interoperability with another package in the <code>QuantumElectrodynamics.jl</code> ecosystem, the pull request will suspend, and one has two options to proceed:</p><ol><li>One can solve the problem locally, by changing the code of the modified (sub-) package. The workflow is the same as for fixing unit tests.</li><li>One needs to modify the depending package, which failed in the integration test. In the following, we describe how to provide the necessary changes to the downstream package and make the CI pass the integration tests, which will resume the pull request.</li></ol><p>For better understanding, the package currently modified by the pull request is called <code>orig</code>, and the package that depends on it is referred to as <code>dep</code>. This means in practice, the <code>Project.toml</code> of the project <code>dep</code> contains the dependency to <code>orig</code>. First, one should fork the package <code>dep</code> and checkout a new feature branch on this fork. The fix of the integration issue for <code>dep</code> is now developed on the feature branch. Once finished, the changes to <code>dep</code> are push to GitHub, and a pull request on <code>dep</code> is opened to check in the changes. By default, the unit test for <code>dep</code> should fail, because the CI in <code>dep</code> needs to use the modified version of <code>orig</code>. The solution for this problem is explained in the section <a href="#Unit-Test-for-CI-Users">Unit Test for CI Users</a>. Using this, one should develop the fix on the feature branch until the CI of <code>dep</code> passes all unit tests. In this case, the original pull request in the upstream package <code>orig</code> can be resumed. Therefore, one needs to tell the CI of <code>orig</code> that the integration tests should use the fixed version package <code>dep</code>, which is still on the feature branch in a pull request on <code>dep</code>. In order to proceed, the CI on <code>orig</code> needs information on where the fix for <code>dep</code> is located. This is given to the CI of <code>orig</code> in a commit message on the origin branch of the pull request on <code>orig</code>, one just needs to add a new line with the following format to the commit message:</p><pre><code class="nohighlight hljs">CI_INTG_PKG_URL_&lt;dep_name&gt;: https://github.com/&lt;user&gt;/&lt;dep_name&gt;#&lt;commit_hash&gt;</code></pre><p>You can find the names of the environment variables in the section <a href="#Environment-Variables">Environment Variables</a>. For an example let&#39;s assume the name of the <code>dep</code> package is <code>dep1.jl</code>, <code>user1</code> forked the package and the commit hash of the fix for package <code>dep1.jl</code> is <code>45a723b</code>. Then, an example message could look like this:</p><pre><code class="nohighlight hljs">This commit extends function foo with a new
function argument.

The function argument is required to control
the new functionality.

If you pass a 0, it has a special meaning.

CI_INTG_PKG_URL_DEP1JL: https://github.com/user1/dep1.jl#45a723b</code></pre><p>It is also possible to set a custom URL for more than one package, which depends on <code>orig</code>. Simply add an additional line of the shape <code>CI_INTG_PKG_URL_&lt;dep_name&gt;: https://github.com/&lt;user&gt;/&lt;dep_name&gt;#&lt;commit_hash&gt;</code> to the commit message.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>You don&#39;t need to add a new commit to set custom URLs. You can modify the commit message with <code>git commit --amend</code> and force push to the branch. This also starts the CI pipeline again.</p></div></div><h1 id="Environment-Variables"><a class="docs-heading-anchor" href="#Environment-Variables">Environment Variables</a><a id="Environment-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Environment-Variables" title="Permalink"></a></h1><p>The following table shows the names of the environment variables to use custom URLs for the unit and integration tests.</p><table><tr><th style="text-align: right">Package Name</th><th style="text-align: right">Unit Test</th><th style="text-align: right">Integration Test</th></tr><tr><td style="text-align: right">QEDbase.jl</td><td style="text-align: right"><code>CI_UNIT_PKG_URL_QEDbase</code></td><td style="text-align: right"><code>CI_INTG_PKG_URL_QEDbase</code></td></tr><tr><td style="text-align: right">QEDcore.jl</td><td style="text-align: right"><code>CI_UNIT_PKG_URL_QEDcore</code></td><td style="text-align: right"><code>CI_INTG_PKG_URL_QEDcore</code></td></tr><tr><td style="text-align: right">QEDevents.jl</td><td style="text-align: right"><code>CI_UNIT_PKG_URL_QEDevents</code></td><td style="text-align: right"><code>CI_INTG_PKG_URL_QEDevents</code></td></tr><tr><td style="text-align: right">QEDfields.jl</td><td style="text-align: right"><code>CI_UNIT_PKG_URL_QEDfields</code></td><td style="text-align: right"><code>CI_INTG_PKG_URL_QEDfields</code></td></tr><tr><td style="text-align: right">QEDprocesses.jl</td><td style="text-align: right"><code>CI_UNIT_PKG_URL_QEDprocesses</code></td><td style="text-align: right"><code>CI_INTG_PKG_URL_QEDprocesses</code></td></tr></table><h1 id="Unit-Tests-for-CI-Develops"><a class="docs-heading-anchor" href="#Unit-Tests-for-CI-Develops">Unit Tests for CI Develops</a><a id="Unit-Tests-for-CI-Develops-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Tests-for-CI-Develops" title="Permalink"></a></h1><p>In this section, we explain how the unit tests are prepared and executed. It is not mandatory to read the section if you only want to use the CI.</p><p>Before the unit tests are executed, the <code>SetupDevEnv.jl</code> is executed, which prepares the project environment for the unit test. It reads the <code>Project.toml</code> of the current project and adds the version of the <code>dev</code> branch of all QED dependency (<code>Pkg.develop()</code>) if no line starting with <code>CI_UNIT_PKG_URL_</code> was defined in the commit message. If <code>CI_UNIT_PKG_URL_</code> was defined, it will use the custom URL.</p><p>The commit message is defined in the environment variable <code>CI_COMMIT_MESSAGE</code> by GitLab CI. If the variable is not defined, the script ignores the commit message. If you want to disable reading the commit message, you can set the name of the commit message variable to an undefined variable via the first argument of the <code>integTestGen.jl</code> script. We use this when executing the CI on the <code>main</code> or <code>dev</code> branch. On these branches, it should not be possible to use custom URLs for unit or integration tests. Therefore we disable it, which also allows the use of <code>CI_INTG_PKG_URL_</code> variables as regular part of the merge commit message.</p><h2 id="Running-Locally"><a class="docs-heading-anchor" href="#Running-Locally">Running Locally</a><a id="Running-Locally-1"></a><a class="docs-heading-anchor-permalink" href="#Running-Locally" title="Permalink"></a></h2><p>If you want to run the script locally, you can set custom URLs via environment variables. For example:</p><pre><code class="language-bash hljs">CI_UNIT_PKG_URL_QEDbase=&quot;www.github.com/User/QEDbase#0e1593b&quot; CI_UNIT_PKG_URL_QEDfields=&quot;www.github.com/User/QEDfields#60324ad&quot; julia --project=/path/to/QED/repo SetupDevEnv.jl`</code></pre><h1 id="Integration-Tests-for-CI-Develops"><a class="docs-heading-anchor" href="#Integration-Tests-for-CI-Develops">Integration Tests for CI Develops</a><a id="Integration-Tests-for-CI-Develops-1"></a><a class="docs-heading-anchor-permalink" href="#Integration-Tests-for-CI-Develops" title="Permalink"></a></h1><p>In this section, we explain how the integration tests are created and executed. It is not mandatory to read the section if you only want to use the CI. The following figure shows the stages of the CI pipeline:</p><p><img src="../integration_jobs_pipeline.svg" alt="detailed CI pipeline of the integration tests"/></p><p>All of the following stages are executed in the CI pipeline of the package, where the code is modified. We name the package <code>orig</code> for easier understanding of the documentation. A package who uses <code>orig</code> is called <code>user</code>. In practice, this means the <code>Project.toml</code> of the project <code>user</code> contains the dependency to <code>orig</code>. A list of <code>user</code> is called <code>users</code>.</p><h2 id="Stage:-Unit-Tests"><a class="docs-heading-anchor" href="#Stage:-Unit-Tests">Stage: Unit Tests</a><a id="Stage:-Unit-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Stage:-Unit-Tests" title="Permalink"></a></h2><p>This stage executes the unit tests of <code>orig</code> via <code>Pkg.test()</code>. The integration tests are only executed, when the unit tests are passed. If the unit tests would not pass, it would test other (sub-) packages with the broken package <code>orig</code> and therefore we cannot expect, that the integration tests pass.</p><h2 id="Stage:-Generate-integration-Tests"><a class="docs-heading-anchor" href="#Stage:-Generate-integration-Tests">Stage: Generate integration Tests</a><a id="Stage:-Generate-integration-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Stage:-Generate-integration-Tests" title="Permalink"></a></h2><p>The integration tests checks, if all (sub-) packages which use the package <code>orig</code> as dependency still work with the code modification of the current pull request.</p><p>Before we talk about the details, here is a small overview on what the <code>integTestGen.jl</code> script is doing. First the CI needs to determine, which (sub-) packages has <code>orig</code> as dependency. Therefore the CI downloads the <code>integTestGen.jl</code> script from the <code>QuantumElectrodynamics.jl</code> project via <code>git clone</code>. The <code>integTestGen.jl</code> script finds out, which (sub-) package use <code>orig</code> and generates for each (sub-) package a new CI test job. So the output of the <code>integTestGen.jl</code> is a GitLab CI yaml file, which can be executed via <a href="https://about.gitlab.com/blog/2020/04/24/parent-child-pipelines/#dynamically-generating-pipelines">GitLab CI child pipeline</a>.</p><p>The <code>integTestGen.jl</code> script traverses the dependency tree of <code>QuantumElectrodynamics.jl</code> package. Because each QED sub-package is a dependency of the <code>QuantumElectrodynamics.jl</code> package, the <code>QuantumElectrodynamics.jl</code> dependency tree contains implicitly all dependency trees of the sub-packages. So the script is traversing the tree and creating a list of sub-packages who depends on <code>orig</code>. This list is called <code>users</code>.</p><p>For each <code>user</code> from the list of <code>users</code> we need to define a separate CI job. First, the job checkouts the <code>dev</code> branch of the git repository of <code>user</code>. Then it sets the modified version of <code>orig</code> as dependency (<code>Pkg.develop(path=&quot;$CI_package_DIR&quot;)</code>). Finally, it executes the unit tests of <code>user</code>. The unit tests of <code>user</code> are tested with the code changes of the current pull request.</p><p>If the <code>dev</code> branch of <code>user</code> does not work, it is also possible to define a custom git commit to a working commit via the git commit message of the pull request of <code>orig</code>. For more details see <a href="#Integration-Tests-for-CI-Users">Integration Tests for CI Users</a>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If a sub-package triggers an integration test, the main package <code>QuantumElectrodynamics.jl</code> is passive. It does not get any notification or trigger any script. The repository is simply cloned.</p></div></div><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>The commit message is defined in the environment variable <code>CI_COMMIT_MESSAGE</code> by GitLab CI.  If the variable is not defined, the script ignores the commit message. If you want to disable reading the commit message, you can set the name of the commit message variable to an  undefined variable via the first argument of the <code>integTestGen.jl</code> script. We use this when  executing the CI on the <code>main</code> or <code>dev</code> branch. On these branches, it should not be possible  to use custom URLs for unit or integration tests. Therefore we disable it, which also allows  the use of <code>CI_INTG_PKG_URL_</code> variables as regular part of the merge commit message.</p></div></div><h2 id="Stage:-Run-Integration-Tests"><a class="docs-heading-anchor" href="#Stage:-Run-Integration-Tests">Stage: Run Integration Tests</a><a id="Stage:-Run-Integration-Tests-1"></a><a class="docs-heading-anchor-permalink" href="#Stage:-Run-Integration-Tests" title="Permalink"></a></h2><p>This stage uses the generated job yaml to create and run new test jobs. It uses the <a href="https://about.gitlab.com/blog/2020/04/24/parent-child-pipelines/#dynamically-generating-pipelines">GitLab CI child pipeline</a> mechanism.</p><h2 id="Stage:-Integration-Tests-of-Sub-Packages-N"><a class="docs-heading-anchor" href="#Stage:-Integration-Tests-of-Sub-Packages-N">Stage: Integration Tests of Sub-Packages N</a><a id="Stage:-Integration-Tests-of-Sub-Packages-N-1"></a><a class="docs-heading-anchor-permalink" href="#Stage:-Integration-Tests-of-Sub-Packages-N" title="Permalink"></a></h2><p>Each job clones the repository of the sub-package. After the clone, it uses the Julia function <code>Pkg.develop(path=&quot;$CI_package_DIR&quot;)</code> to replace the dependency to the package <code>orig</code> with the modified version of the pull request and execute the tests of the sub-package via <code>Pkg.test()</code>.</p><p>The integration tests of each sub-package are executed in parallel. So, if the integration tests of a package fails, the integration tests of the other packages are still executed and can pass.</p><h2 id="Running-Locally-2"><a class="docs-heading-anchor" href="#Running-Locally-2">Running Locally</a><a class="docs-heading-anchor-permalink" href="#Running-Locally-2" title="Permalink"></a></h2><p>The <code>integTestGen.jl</code> script has a special behavior. It creates its own <code>Project.toml</code> in a temporary folder and switches its project environment to it. Therefore, you need to start the script with the project path <code>--project=ci/integTestGen</code>. You also need to set two environment variables:</p><ul><li><strong>CI_DEPENDENCY_NAME:</strong> Name of the <code>orig</code>. For example <code>QEDbase</code>.</li><li><strong>CI_PROJECT_DIR:</strong> Path to the project root directory of <code>orig</code>. This path is used in the generated integration test, to set the dependency the modified code of <code>orig</code>.</li></ul><p>The following example assumes that the <code>QuantumElectrodynamics.jl</code> project is located at <code>$HOME/projects/QuantumElectrodynamics.jl</code> and the project to test is <code>QEDbase.jl</code> and is located at <code>$HOME/projects/QEDbase.jl</code>.</p><pre><code class="language-bash hljs">CI_DEV_PKG_NAME=QEDbase CI_PROJECT_DIR=&quot;$HOME/projects/QEDbase.jl&quot; julia --project=$HOME/projects/QuantumElectrodynamics.jl/ci/integTestGen $HOME/projects/QuantumElectrodynamics.jl/ci/integTestGen/src/integTestGen.jl</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../dev_guide/">Development Guide »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 25 November 2024 19:24">Monday 25 November 2024</span>. Using Julia version 1.10.6.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
